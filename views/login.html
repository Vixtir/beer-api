<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="styles/style.css">
  <script src="./dist/app.bundle.js" defer></script>
  <title>Beer</title>
</head>
<body>
  <div>
    Login
  </div>
  <form action="#">
    <label for="name">Имя</label>
    <input type="text" name="name" id="name">
    <label for="password">Пароль </label>
    <input type="text" name="password" id="password">
    <input type="submit" name="sing" id="sign">
  </form>
</body>

<script>
  let form = document.forms[0];

  form.onsubmit = function(e){
    e.preventDefault();
    const name  = form.querySelector('input#name').value;
    const password = form.querySelector('input#password').value;
    if(name && password){
      let body = `name=${encodeURIComponent(name)}&password=${encodeURIComponent(password)}`;
      let request = new XMLHttpRequest();
      request.open('POST', 'login');
      request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      request.send(body);
      
      request.onreadystatechange = () => {
        if (request.readyState == 4 && request.status == 200) {
          let response = JSON.parse(request.responseText);
          if (response) {
            window.localStorage.setItem('token', response);
          } else {
            console.log('some went wrong');
          }
        };
      }
    }


  } 
</script>
</html>